<?xml version="1.0" encoding="UTF-8"?>
<!-- XML 선언: UTF-8 인코딩으로 작성된 Maven POM 문서 -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <!-- Maven 프로젝트 루트 요소
       - xmlns: POM 4.0.0 네임스페이스
       - xsi:schemaLocation: 스키마 유효성 검사용 위치 지정 -->

  <modelVersion>4.0.0</modelVersion>
  <!-- POM 모델 버전(항상 4.0.0 사용) -->

  <groupId>com.mycompany</groupId>
  <!-- 그룹 ID: 보통 조직/회사 도메인 역순 네이밍 -->

  <artifactId>p2p-chat</artifactId>
  <!-- 아티팩트 ID: 빌드 산출물(jar)의 이름 핵심 부분 -->

  <name>p2p-chat</name>
  <!-- 프로젝트 표시 이름(메타 정보) -->

  <version>1.0-SNAPSHOT</version>
  <!-- 프로젝트 버전: SNAPSHOT은 개발 중 스냅샷 의미 -->

  <build>
    <!-- 빌드 관련 설정 블록 -->

    <plugins>
      <!-- Maven 플러그인들을 정의하는 블록 -->

      <plugin>
        <!-- 1) Java 컴파일 플러그인 설정 -->
        <artifactId>maven-compiler-plugin</artifactId>
        <!-- 사용할 플러그인 artifactId (groupId는 기본 org.apache.maven.plugins로 생략 가능) -->

        <version>3.8.1</version>
        <!-- 컴파일러 플러그인 버전 (안정적) -->

        <configuration>
          <!-- 컴파일 옵션 지정 블록 -->

          <source>${maven.compiler.source}</source>
          <!-- 자바 소스 호환 버전(아래 properties에서 21로 지정) -->

          <target>${maven.compiler.target}</target>
          <!-- 생성 클래스 타깃 바이트코드 버전(아래 properties에서 21로 지정) -->
        </configuration>
      </plugin>

      <plugin>
        <!-- 2) JAR 패키징 플러그인 설정 -->
        <artifactId>maven-jar-plugin</artifactId>
        <!-- 표준 jar 플러그인 -->

        <version>3.2.2</version>
        <!-- 플러그인 버전 -->

        <configuration>
          <!-- JAR 생성 시의 상세 설정 -->

          <archive>
            <!-- 아카이브(=JAR) 메타데이터 설정 -->

            <manifest>
              <!-- MANIFEST.MF 설정 블록 -->

              <mainClass>${exec.mainClass}</mainClass>
              <!-- 실행 진입점(메인 클래스) 지정: properties의 exec.mainClass 값 사용 -->
            </manifest>
          </archive>
        </configuration>
      </plugin>

      <plugin>
        <!-- 3) JavaFX 실행 플러그인 설정 -->
        <groupId>org.openjfx</groupId>
        <!-- JavaFX용 플러그인 그룹 ID -->

        <artifactId>javafx-maven-plugin</artifactId>
        <!-- JavaFX 애플리케이션을 mvn으로 실행하기 위한 플러그인 -->

        <version>0.0.8</version>
        <!-- 플러그인 버전(프로젝트에 맞춰 사용) -->

        <configuration>
          <!-- JavaFX 실행 설정 -->

          <mainClass>${exec.mainClass}</mainClass>
          <!-- JavaFX가 실행할 메인 클래스(동일하게 properties 값 사용) -->
        </configuration>
      </plugin>

      <plugin>
        <!-- 4) Shade 플러그인: 의존성까지 모두 포함한 fat-jar 생성 -->
        <artifactId>maven-shade-plugin</artifactId>
        <!-- 셰이딩 플러그인 artifactId (groupId는 기본 org.apache.maven.plugins로 생략 가능) -->

        <version>3.2.4</version>
        <!-- 플러그인 버전 -->

        <executions>
          <!-- 언제/어떻게 shade goal을 실행할지 정의 -->

          <execution>
            <!-- 실행 단위 정의 -->

            <phase>package</phase>
            <!-- Maven lifecycle의 package 단계에서 동작하도록 지정 -->

            <goals>
              <!-- 실행할 goal 목록 -->

              <goal>shade</goal>
              <!-- shade goal: 모든 의존성을 하나의 실행 가능한 JAR로 병합 -->
            </goals>

            <configuration>
              <!-- shade 동작에 대한 상세 설정 -->

              <transformers>
                <!-- Manifest 등 리소스 병합 시 변환기 지정 -->

                <transformer>
                  <!-- 기본 Manifest 설정을 위한 변환기(단순 표기) -->

                  <mainClass>${exec.mainClass}</mainClass>
                  <!-- 병합된 fat-jar의 Main-Class를 지정 -->
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>

    </plugins>
  </build>

  <properties>
    <!-- 공통으로 참조할 프로퍼티 정의(위에서 ${...}로 참조) -->

    <maven.compiler.target>21</maven.compiler.target>
    <!-- 컴파일 타깃 바이트코드 버전: Java 21 -->

    <exec.mainClass>com.mycompany.chat.App</exec.mainClass>
    <!-- 애플리케이션 진입점: JavaFX Application을 시작하는 메인 클래스 -->

    <maven.compiler.source>21</maven.compiler.source>
    <!-- 소스 호환 버전: Java 21 -->

    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <!-- 소스 파일 인코딩(UTF-8) -->

    <javafx.version>24.0.2</javafx.version>
    <!-- JavaFX 라이브러리 버전(여기선 메타 정보로만 쓰임) -->
  </properties>
</project>
<!-- 프로젝트 루트 요소 종료 -->
